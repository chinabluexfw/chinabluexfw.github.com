---
layout : post
category : lessons
tags :  Scala
title :  Scala编程语言优势

---


1 强大的编程语言

	Scala 是一门非常强大的语言，它允许用户使用命令和函数范式进行编写代码，因此，编程时你可以使用常用的命令式语句，就像我们使用 C、Java、PHP 以及很多其他语言一样，而且，你也可以使用类似 Lisp 语言中函数式语句，还有，你可以混合使用这两种风格的语句，就像 Ruby 或 Groovy。
	不过，当我们谈论的函数范式时，与 Ruby 和 Groovy 有一点不同的地方，那就是 Scala 几乎支持函数语言中所有已知的功能，比如，模式匹配（Pattern matching）、延迟初始化（Lazy initialization）、偏函数（Partial Function）、不变性（Immutability），等等...即是说，认识到这样一个事实是非常重要的：Scala 的强大源自它对函数范式的支持，而后者令 Scala 成为一种高等级（high-level）的编程语言。对于高等级的编程语言，你只需关注 what（做什么）而不是如何做（how）。
	下面，让我们看一个 Java 示例：
	1. int[] x = {1,2,3,4,5,6};   
	2. ArrayList res = new ArrayList();   
	3. for (int v : x) {   
	4. if (v % 2 == 1) res.add(new Integer(v));   
	5. } 
	仔细看一下上面这段示例代码，你会注意到，我想要做的“what”部分（过滤掉奇数值）仅出现在第四行中，而其余行则是“how”如何做的部分（结果变量的初始化以及一个循环操作）。
	如果我想要再写一个过滤器，用于筛选偶数值，那就需要再写五行代码，而使用一门像 Scala 这样的高等级语言，你只需编写“what”那部分的代码：
	1. val x = Array(1,2,3,4,5,6)   
	2. val res = x filter ( _ % 2 == 1 ) //过滤奇数值  
	3. val res2 = x filter ( _ % 2 == 0 ) //过滤偶数值 
	我们可以看到，相对于上文中的 Java 代码段，这段代码更加简洁，而且具有更好的可读性。



2 高效

	Scala 是一种高效的编程语言，实际上，根据最新的 benchmark 性能测试，它几乎和 Java 一样快捷。
	在 JVM 上实现的 Scala 代码，可以编译为字节码，在这一过程中，代码通过优化阶段进行编译。
	尾递归优化是一个很好的示例，它可帮助用户专注于函数范式而无需以牺牲性能为代价。还有一个示例是，将 Scala 值类型对象转换为 Java 基本类型时进行的优化。

3 可扩展

	Scala 语言本身的名字 Scala 来自 Scalable（可扩展的）一词，这意味着这种语言可以按照用户的需求进行扩展。因此，从根本上来讲，用户可以添加新的类型和控制结构。比如，我想要添加一个简单的“loop”控制结构：
	1. // 一个简单的构建  
	2. def loop(range: Range)(op: Int=> Unit) {  
	3. range foreach (op)   
	4. }     
	5.  
	6. loop(1 to 5){println} // 1 2 3 4 5   
	7. loop(1 to 5){x => if (x % 2 == 0) println(x)} // 2 4  
	还有几个更为复杂的例子，Actor lib，它是作为扩展被添加到 Scala 这一语言中的，我们将在下文中对它展开讨论。
	不过，Scala 之所以是可扩展的，在于互相关联的两点：它是真正的面向对象的语言和真正的函数式语言。
	
3 面向对象

	Scala 中每个事物都是对象（对象的方法除外），因此，没有必要对基本（primitive）类型或引用类型进行区分，这就是所谓的：统一对象模型（Uniform Object Model）。
	但是，正如我之前在优化流程中所提到的，值类型对象被转换为 Java 基本类型，因此不必担心性能的问题。其内部还包含为类方法分组的单件对象（Singleton object）。
	◆所有操作都是方法调用，+ - * ! / 都是方法，因此，没有必要进行操作符重载。
	◆非常精细的访问控制，用户可以控制对某些包的某些方法的访问。
	◆Scala 具有  trait，与 Ruby 中的 mixin 类似，就像 Java 中的 interfaces，但实现了某些它们的方法，因此，用户在箱体（box）之外拥有富封装器（wrapper）和富交互接口（interface）。

5 函数式语言

	函数式语言具有很多特点，不过在扩展性这一语境中，我们所关心的是两个事实：
	◆函数是第一等级（first-class）的值
	这表示用户可以将函数作为值传递，也可以作为值返回。这样可以获得简洁而具有可读性的代码，正如上文中作为示例的过滤代码段。
	◆纯函数（pure function）
	Scala 支持没有副作用的纯函数，这意味着：如果你的输入相同，那么输出结果也总是相同。这样能够让代码更为安全，对代码测试也更为方便。
	但是，Scala 是通过什么方式来支持纯函数的呢？通过不变性（immutability）：偏向固定的引用（与 java 中的 final 或其他语言中的 constant 类似）以及具有不变的数据结构，一旦创建便不可修改。
	不变性是拥有纯函数的安全保证，但并不是唯一的方式。没有不变性，你仍然可以编写安全的代码。这就是为什么 Scala 不是强制推行不变性而只是鼓励使用它。最终，你会发现 Scala 中许多数据结构具有了两种实现方式，一种是可变的，另一种是不可变的，不可变的数据结构是缺省导入的。
	每当提到不变性时，有人就会开始担心性能的问题，对于某些情况，这种担忧并非毫无来由，但对于 Scala，最终结果却与这一担忧相反。不可变的数据结构相对于可变的数据结构，更有助于获得较高的效率。其原因之一在于强大的垃圾收集器（garbage collector），与 JVM 中的垃圾收集器类似。

6 更佳的并行模型

	当涉及到线程这一问题时，Scala 支持传统的 shared data 模型。但是，使用这种模型较长一段时间之后，许多人发现使用这种模型编写代码，非常难以实现以及进行测试。
	你总是需要考虑死锁问题和竞争条件。因此，Scala 提供了另一个称为 Actor 的并行模型，其中，actor 通过它的收件箱来发送和接收非同步信息，而不是共享数据。
	这种方式被称为：shared nothing 模型。一旦你不再顾虑共享数据的问题，也就不必再为代码同步和死锁问题而头痛。
